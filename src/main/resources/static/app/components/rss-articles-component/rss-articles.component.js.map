{"version":3,"file":"rss-articles.component.js","sourceRoot":"","sources":["../../../home/duc/angular2-quickstart/web-rss-frontend/tmp/broccoli_type_script_compiler-input_base_path-brJ7QIW9.tmp/0/src/app/components/rss-articles-component/rss-articles.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {Component, Input, OnInit, OnChanges, SimpleChange} from '@angular/core';\n\nimport {Article} from '../../';\nimport {ArticleService} from '../../services/article.service';\n\nenum SortRule {\n    ByRead,\n    ByNewest,\n    ByABC\n}\n\n\n@Component({\n    selector: 'feed-articles',\n    templateUrl: '/app/components/rss-articles-component/rss-articles.component.html'\n})\nexport class RssArticlesComponent implements OnChanges, OnInit {\n\n    @Input()\n    articles: Article[];\n    isCheckAll: boolean = false;\n    sortRule = SortRule;\n    count: number = 0;\n\n    constructor(private articleService: ArticleService) { }\n\n    ngOnInit() {\n        console.log('init RssArticlesComponent');\n    }\n\n    ngOnChanges(changes: { [propertyName: string]: SimpleChange }) {\n        for (let proName in changes) {\n            switch (proName) {\n                case 'articles':\n                    this.changeArticle(changes[proName].currentValue);\n                    console.log('rss change in RssArticlesComponent');\n                    break;\n\n                default:\n                    break;\n            }\n        }\n    }\n\n    private changeArticle(value: Article[]) {\n        if (typeof this.articles !== 'undefined') {\n            this.count = this.articles.length;\n            if (value.filter(a => a.checked).length === value.length && value.length > 0) {\n                this.isCheckAll = true;\n            } else {\n                this.isCheckAll = false;\n            }\n        }\n    }\n\n    checkAll(checked: boolean) {\n        console.log('run check all');\n        this.articles.forEach(a => a.checked = checked);\n    }\n\n    unCheckAll() {\n        this.articles.forEach(a => a.checked = false);\n        this.isCheckAll = false;\n    }\n\n    checkRead() {\n        this.unCheckAll();\n        this.articles.forEach(a => {\n            if (a.isRead) {\n                a.checked = true;\n            }\n        });\n    }\n\n    checkUnRead() {\n        this.unCheckAll();\n        this.articles.forEach(a => {\n            if (!a.isRead) {\n                a.checked = true;\n            }\n        });\n    }\n\n    makeCheckedRead() {\n        let updateArticles: Article[] = [];\n        this.articles.forEach(a => {\n            if (a.checked && !a.isRead) {\n                a.isRead = true;\n                updateArticles.push(a);\n            }\n        });\n        if (updateArticles.length > 0) {\n            this.unCheckAll();\n            this.articleService.updateArticles(updateArticles)\n                .then(a => {\n                    if (a === null) {\n                        alert('co loi khi update articles');\n                    }\n                });\n        }\n\n    }\n\n    makeRead(article: Article) {\n        if (!article.isRead) {\n            article.isRead = true;\n            this.articleService.updateArticle(article)\n                .then(article => {\n                    if (article === null) {\n                        alert('co loi khi update');\n                    }\n                });\n        }\n    }\n\n    deleteChecked() {\n        let articles = this.articles.filter(a => a.checked);\n        if (articles.length !== 0) {\n            this.unCheckAll();\n            this.articleService.deleteArticles(articles)\n                .then(a => {\n                    if (a !== null) {\n                        this.deleteArticles(a);\n                    } else {\n                        alert('có lỗi xảy ra không xóa được mở console để biết thêm');\n                    }\n                })\n        }\n    }\n\n    private deleteArticles(articles: Article[]) {\n        articles.forEach(a => {\n            let i = this.articles.indexOf(a);\n            this.articles.splice(i, 1);\n        });\n    }\n\n    sort(rule: SortRule) {\n        switch (rule) {\n            case this.sortRule.ByRead:\n                this.articles.sort(this.SortByRead);\n                break;\n            case this.sortRule.ByNewest:\n                this.articles.sort(this.SortByNewest);\n                break;\n            case this.sortRule.ByABC:\n                this.articles.sort(this.SortByABC);\n                break;\n\n            default:\n                this.articles.sort(this.SortByABC);\n                break;\n        }\n    }\n\n    private SortByRead(a1: Article, a2: Article): number {\n        if (!a1.isRead) {\n            return -1;\n        } else {\n            return 1;\n        }\n    }\n\n    private SortByNewest(a1: Article, a2: Article): number {\n        if (a1.publishDate > a2.publishDate) {\n            return -1;\n        } else {\n            return 1;\n        }\n    }\n\n    private SortByABC(a1: Article, a2: Article): number {\n        if (a1.title > a2.title) {\n            return 1;\n        } else {\n            return -1;\n        }\n    }\n}\n"]}